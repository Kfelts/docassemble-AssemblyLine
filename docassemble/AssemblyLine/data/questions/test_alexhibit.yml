# TODO: Why is 'unpack' called that if it just gets the first one?
# TODO: Should we abstract the amount of memory allowed?
# TODO: Can an exhibit add a cover page after it's already been cached?
# TODO: ALExhibitDocument's _cache attr is not used?
# TODO: ALExhibitsList - is `.filename` ever defined? How to test that?
# TODO: "In the assembly line, we expect to find two predetermined bundles: court_bundle and user_bundle." What does this mean? That the developer should define these two bundles?
# TODO: Propose that methods that aren't currently active/available be commented out and that function descriptions only contain active attributes and methods.
# TODO: Is ALExhibit `elements` used?
# TODO: How to test ALExhibit ~`elements` (by adding docs/pages?)~, cover_page, label, starting_page, pages(?)?
# TODO: Test ALExhibitDocument's include_table_of_contents, include_exhibit_cover_pages, add_page_numbers.
# TODO: Why do we have al_documents and aldocuments names for files? Would it be useful to be more consistent?
---
include:
  - al_package.yml
---
mandatory: True
code: |
  thumbnails_defaults
  download_list_defaults
  thumbnails_custom
  download_list_html_custom_1
  download_list_html_custom_2
  end_alexhibit_tests
---
objects:
  - exhibits_bundle_defaults_1: ALDocumentBundle.using(elements=[exhibit_doc_defaults_1], filename="exhibits_bundle_defaults", title="Exhibits with defaults")
  #- exhibits_bundle_custom_1: ALDocumentBundle.using(elements=[exhibit_doc_custom_1], filename="exhibits_bundle_custom", title="Exhibits with custom args")
---
objects:
  - exhibit_doc_defaults_1: ALExhibitDocument.using(title="Exhibits doc defaults", filename="exhibits_doc_defaults" )
  ## Not implemented yet
  ## `include_table_of_contents` default True 
  ## `include_exhibit_cover_pages` default True
  #- exhibit_doc_custom_1: ALExhibitDocument.using(title="Exhibits doc custom args", filename="exhibits_doc_custom", include_table_of_contents=False, include_exhibit_cover_pages=False )
---
code: |
  exhibit_doc_defaults_1.enabled = exhibit_doc_defaults_1.exhibits.there_are_any
  #exhibit_doc_custom_1.enabled = exhibit_doc_custom_1.exhibits.there_are_any
---
# Note on test screens: Screens test that custom ALDocumentBundle arguments and such are happy. As far as custom exhibit arguments, they're tested in instantiation of the custom exhibit document itself. Currently, each screen should test both the default exhibit document and the custom exhibit document (once custom arguments are implemented).
---
# ALDocumentBundle defaults
id: thumbnails_defaults
continue button field: thumbnails_defaults
question: Exhibits download list
subquestion: |
  ${ exhibits_bundle_defaults_1.as_pdf() }
  
  ---
  
#  ${ exhibits_bundle_custom_1.as_pdf() }
---
# ALDocumentBundle defaults
id: download_list_defaults
continue button field: download_list_defaults
question: Exhibits download list
subquestion: |
  ${ exhibits_bundle_defaults_1.download_list_html() }
  
  ---
  
#  ${ exhibits_bundle_custom_1.download_list_html() }
---
# ALDocumentBundle custom values
id: thumbnails_custom
continue button field: thumbnails_custom
question: |
  Get thumbnails of bundles with custom args
subquestion: |
  - .as_pdf(), .preview(), .as_zip()
  - All possible custom args passed in. Not sure how to test use of these. We'll at least test that nothing errors.
  
  exhibits_bundle_defaults_1.as_pdf( key="test_key", refresh=False )
  
  ${ exhibits_bundle_defaults_1.as_pdf( key="test_key", refresh=False ) }
  
  exhibits_bundle_defaults_1.preview( refresh=False )
  
  ${ exhibits_bundle_defaults_1.preview( refresh=False ) }
  
  exhibits_bundle_defaults_1.as_zip( key="test_key", refresh=False, title="Custom title" )
  
  ${ exhibits_bundle_defaults_1.as_zip( key="test_key", refresh=False, title="Custom title" ) }
  
  ---
  
#  exhibits_bundle_custom_1.as_pdf( key="test_key", refresh=False )
#  
#  ${ exhibits_bundle_custom_1.as_pdf( key="test_key", refresh=False ) }
#  
#  exhibits_bundle_custom_1.preview( refresh=False )
#  
#  ${ exhibits_bundle_custom_1.preview( refresh=False ) }
#  
#  exhibits_bundle_custom_1.as_zip( key="test_key", refresh=False, title="Custom title" )
#  
#  ${ exhibits_bundle_custom_1.as_zip( key="test_key", refresh=False, title="Custom title" ) }
---
# ALDocumentBundle custom values
id: download_list_html_custom_1
continue button field: download_list_html_custom_1
question: |
  download_list_html() with custom args (1)
subquestion: |
  Unchanged:
  
  - Keep "view" as True
  - Keep "include_zip" as True
  
  exhibits_bundle_defaults_1.download_list_html( key="test_key", format="docx", refresh=False, view_label="Custom view label", view_icon="circle", download_label="Custom download label", download_icon="square", zip_label="Custom zip label", zip_icon="clock" )
  
  ${ exhibits_bundle_defaults_1.download_list_html( key="test_key", format="docx", refresh=False, view_label="Custom view label", view_icon="circle", download_label="Custom download label", download_icon="square", zip_label="Custom zip label", zip_icon="clock" ) }
  
  ---
  
#  exhibits_bundle_custom_1.download_list_html( key="test_key", format="docx", refresh=False, view_label="Custom view label", view_icon="circle", download_label="Custom download label", download_icon="square", zip_label="Custom zip label", zip_icon="clock" )
#  
#  ${ exhibits_bundle_custom_1.download_list_html( key="test_key", format="docx", refresh=False, view_label="Custom view label", view_icon="circle", download_label="Custom download label", download_icon="square", zip_label="Custom zip label", zip_icon="clock" ) }
---
# ALDocumentBundle custom values
id: download_list_html_custom_2
continue button field: download_list_html_custom_2
question: |
  download_list_html() with custom args (2)
subquestion: |
  exhibits_bundle_defaults_1.download_list_html( view=False, include_zip=False )
  
  ${ exhibits_bundle_defaults_1.download_list_html( view=False, include_zip=False ) }

  ---
  
#  exhibits_bundle_custom_1.download_list_html( view=False, include_zip=False )
#  
#  ${ exhibits_bundle_custom_1.download_list_html( view=False, include_zip=False ) }
---
id: end alexhibit tests
event: end_alexhibit_tests
question: The end of ALExhibitDocument tests
buttons:
  - Restart: restart
---
